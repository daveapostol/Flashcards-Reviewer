<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Comprehensive IGCSE Tectonic Hazards Reviewer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono&display=swap');
        
        body { font-family: 'Inter', sans-serif; background-color: #f8fafc; color: #0f172a; scroll-behavior: smooth; -webkit-tap-highlight-color: transparent; }
        .nav-active { border-bottom: 3px solid #2563eb; color: #2563eb; font-weight: 700; }
        .hidden-section { display: none; }
        .bar-grow { transform-origin: bottom; transition: transform 1s ease-out; }
        
        /* Interactive SVG Styles - Optimized for Touch */
        .interactive-part { cursor: pointer; transition: all 0.3s ease; opacity: 0.9; }
        .interactive-part:active, .interactive-part:hover { opacity: 1; filter: brightness(1.2); stroke: white; stroke-width: 2px; }
        
        /* Label transitions */
        .volcano-label { 
            transition: opacity 0.3s ease; 
            pointer-events: none; 
            text-shadow: 0px 0px 3px rgba(255,255,255,1), 0px 0px 5px rgba(255,255,255,1); 
            font-weight: 700; 
            font-family: sans-serif; 
            fill: #0f172a;
            font-size: 10px;
        }
        .hidden-label { opacity: 0; }

        /* Detail Box Animation */
        .detail-box { transition: all 0.3s ease; border-left: 4px solid #2563eb; }
        
        /* Table Styles */
        .data-table th { background-color: #f1f5f9; color: #475569; font-weight: 600; text-transform: uppercase; font-size: 0.75rem; letter-spacing: 0.05em; }
        .data-table td { font-size: 0.875rem; border-bottom: 1px solid #e2e8f0; }
        .data-table tr:last-child td { border-bottom: none; }

        /* Active Learning UI */
        .bar-interactive { cursor: pointer; transition: opacity 0.2s; }
        .bar-interactive:active, .bar-interactive:hover { opacity: 0.7; }
        
        /* Word Chips - Touch Friendly Padding */
        .word-chip { 
            background: white; border: 1px solid #cbd5e1; padding: 8px 16px; border-radius: 20px; 
            font-size: 0.85rem; font-weight: 600; cursor: pointer; transition: all 0.2s;
            box-shadow: 0 1px 2px rgba(0,0,0,0.05); user-select: none;
        }
        .word-chip:active, .word-chip:hover { transform: translateY(-1px); border-color: #3b82f6; color: #2563eb; }
        .word-chip.selected { background: #eff6ff; border-color: #2563eb; color: #2563eb; }
        
        .sentence-slot {
            display: inline-block; border-bottom: 2px dashed #94a3b8; min-width: 80px; text-align: center;
            color: #2563eb; font-weight: bold; padding: 0 4px;
        }

        .probe-btn {
            @apply w-full text-left px-4 py-4 bg-white border border-slate-200 rounded-lg text-sm font-medium active:border-blue-400 transition-all shadow-sm;
        }
        .probe-btn.correct { @apply border-green-500 bg-green-50 text-green-700; }
        .probe-btn.wrong { @apply border-red-300 bg-red-50 text-red-700; }

        /* Hide scrollbar for Chrome, Safari and Opera */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        /* Hide scrollbar for IE, Edge and Firefox */
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

        /* Arrow Animations */
        @keyframes pulse-right {
            0% { transform: translateX(0); opacity: 0.7; }
            50% { transform: translateX(5px); opacity: 1; }
            100% { transform: translateX(0); opacity: 0.7; }
        }
        @keyframes pulse-left {
            0% { transform: translateX(0); opacity: 0.7; }
            50% { transform: translateX(-5px); opacity: 1; }
            100% { transform: translateX(0); opacity: 0.7; }
        }
        .arrow-right { animation: pulse-right 1.5s infinite ease-in-out; }
        .arrow-left { animation: pulse-left 1.5s infinite ease-in-out; }
    </style>
</head>
<body class="antialiased pb-20">

    <!-- NAVIGATION HEADER -->
    <header class="bg-white border-b sticky top-0 z-50 shadow-sm">
        <div class="max-w-6xl mx-auto px-4">
            <div class="flex flex-col md:flex-row justify-between items-center py-3 gap-3">
                <div class="flex items-center gap-2 w-full md:w-auto">
                    <span class="bg-blue-600 text-white p-1.5 rounded-lg">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path></svg>
                    </span>
                    <h1 class="text-lg font-bold truncate">IGCSE Tectonic Expert</h1>
                </div>
                <!-- Horizontally Scrollable Nav for Mobile -->
                <nav class="flex overflow-x-auto w-full md:w-auto gap-2 md:gap-8 pb-1 no-scrollbar items-center">
                    <button onclick="switchTab('core')" id="tab-core" class="nav-active flex-shrink-0 whitespace-nowrap px-3 py-2 text-sm rounded-lg hover:bg-slate-50 transition-colors">Core Theory</button>
                    <button onclick="switchTab('volcano')" id="tab-volcano" class="flex-shrink-0 whitespace-nowrap px-3 py-2 text-sm rounded-lg hover:bg-slate-50 transition-colors">Volcano Diagram</button>
                    <button onclick="switchTab('data')" id="tab-data" class="flex-shrink-0 whitespace-nowrap px-3 py-2 text-sm rounded-lg hover:bg-slate-50 transition-colors">Data Laboratory</button>
                    <button onclick="switchTab('impact')" id="tab-impact" class="flex-shrink-0 whitespace-nowrap px-3 py-2 text-sm rounded-lg hover:bg-slate-50 transition-colors">Case Study: Tonga</button>
                    <button onclick="switchTab('exam')" id="tab-exam" class="flex-shrink-0 whitespace-nowrap px-3 py-2 text-sm rounded-lg hover:bg-slate-50 transition-colors">Assessment Workshop</button>
                </nav>
            </div>
        </div>
    </header>

    <main class="max-w-5xl mx-auto p-4 md:p-8">

        <!-- CORE THEORY SECTION -->
        <section id="sec-core" class="space-y-8">
            <div class="bg-white rounded-xl shadow-sm border p-6">
                <h2 class="text-xl md:text-2xl font-bold border-b pb-3 mb-6">1. Earth's Structure & Layers</h2>
                
                <div class="grid md:grid-cols-2 gap-8 items-center">
                    <div class="space-y-4">
                        <h3 class="font-bold text-blue-700">The Internal Structure</h3>
                        <p class="text-sm leading-relaxed">The Earth is composed of four layers. The <strong>Lithosphere</strong> is a critical termâ€”it consists of the crust and the rigid uppermost part of the mantle.</p>
                        <ul class="space-y-2 text-sm">
                            <li class="flex items-center gap-2"><span class="w-3 h-3 bg-gray-700 rounded-full"></span> <strong>Crust:</strong> Solid rock (tectonic plates).</li>
                            <li class="flex items-center gap-2"><span class="w-3 h-3 bg-orange-500 rounded-full"></span> <strong>Mantle:</strong> Semi-molten magma (Convection).</li>
                            <li class="flex items-center gap-2"><span class="w-3 h-3 bg-yellow-400 rounded-full"></span> <strong>Outer Core:</strong> Liquid metal.</li>
                            <li class="flex items-center gap-2"><span class="w-3 h-3 bg-red-600 rounded-full"></span> <strong>Inner Core:</strong> Solid metal.</li>
                        </ul>
                    </div>
                    <div class="bg-slate-50 p-4 rounded-xl flex justify-center">
                        <svg viewBox="0 0 200 200" class="w-48 h-48 md:w-64 md:h-64">
                            <defs>
                                <radialGradient id="coreGradient" cx="50%" cy="50%" r="50%" fx="50%" fy="50%">
                                    <stop offset="0%" style="stop-color:#ffffff;stop-opacity:1" />
                                    <stop offset="100%" style="stop-color:#dc2626;stop-opacity:1" />
                                </radialGradient>
                            </defs>
                            <circle cx="100" cy="100" r="95" fill="#334155"/> 
                            <circle cx="100" cy="100" r="85" fill="#f97316"/> 
                            <circle cx="100" cy="100" r="50" fill="#fbbf24"/> 
                            <circle cx="100" cy="100" r="25" fill="url(#coreGradient)"/>
                            <line x1="100" y1="10" x2="130" y2="10" stroke="white" stroke-width="1"/>
                            <text x="135" y="15" font-size="8" font-weight="bold">Crust</text>
                            <line x1="100" y1="40" x2="130" y2="40" stroke="white" stroke-width="1"/>
                            <text x="135" y="45" font-size="8" font-weight="bold">Mantle</text>
                        </svg>
                    </div>
                </div>
            </div>

            <div class="bg-white rounded-xl shadow-sm border p-6">
                <h2 class="text-xl md:text-2xl font-bold border-b pb-3 mb-6">2. Boundary Analysis (Fig 1.1 Match)</h2>
                <div class="grid md:grid-cols-2 gap-8 mb-6">
                    <div class="p-4 border rounded-lg bg-red-50">
                        <h3 class="font-bold text-red-800 mb-4">Destructive (Convergent)</h3>
                        <svg viewBox="0 0 200 120" class="w-full mb-4 bg-white rounded border">
                            <defs>
                                <marker id="arrow-red" markerWidth="10" markerHeight="10" refX="7" refY="3" orient="auto" markerUnits="strokeWidth"><path d="M0,0 L0,6 L9,3 z" fill="#dc2626" /></marker>
                            </defs>
                            
                            <!-- Illustrations (Bottom Layer) -->
                            <path d="M0 80 H80 L140 100 H200" stroke="#64748b" fill="none" stroke-width="2"/> <!-- Oceanic -->
                            <path d="M80 80 Q100 80 120 40 H200" stroke="#334155" fill="#94a3b8" stroke-width="2"/> <!-- Continental -->
                            <path d="M140 40 L160 20 L180 40" fill="#ef4444"/> <!-- Volcano -->
                            <circle cx="95" cy="85" r="3" fill="#ef4444"/> <!-- Focus -->
                            <text x="100" y="95" font-size="8" font-weight="bold" fill="#ef4444">Y (Focus)</text>
                            <text x="90" y="70" font-size="8" font-weight="bold">X (Trench)</text>
                            <path d="M120 40 Q105 60 115 85" stroke="#3b82f6" fill="none" stroke-dasharray="2"/> <!-- Subduction -->

                            <!-- Arrows (Top Layer - Moved Up for Visibility) -->
                            <path d="M30 20 L50 20" stroke="#dc2626" stroke-width="3" marker-end="url(#arrow-red)" class="arrow-right"/>
                            <path d="M190 20 L170 20" stroke="#dc2626" stroke-width="3" marker-end="url(#arrow-red)" class="arrow-left"/>
                            <text x="25" y="15" font-size="8" fill="#dc2626" font-weight="bold">Movement</text>
                        </svg>
                        <ul class="text-xs list-disc pl-4 space-y-1">
                            <li><strong>Movement:</strong> Plates move <strong>TOWARDS</strong> each other.</li>
                            <li><strong>X (Oceanic Trench):</strong> Where the plate subducts.</li>
                            <li><strong>Y (Focus):</strong> Origin of the earthquake.</li>
                        </ul>
                    </div>
                    <div class="p-4 border rounded-lg bg-green-50">
                        <h3 class="font-bold text-green-800 mb-4">Constructive (Divergent)</h3>
                        <svg viewBox="0 0 200 120" class="w-full mb-4 bg-white rounded border">
                            <defs>
                                <marker id="arrow-green" markerWidth="10" markerHeight="10" refX="7" refY="3" orient="auto" markerUnits="strokeWidth"><path d="M0,0 L0,6 L9,3 z" fill="#166534" /></marker>
                            </defs>
                            
                            <!-- Illustrations -->
                            <path d="M0 60 H70 L90 80" stroke="#334155" fill="none" stroke-width="3"/>
                            <path d="M200 60 H130 L110 80" stroke="#334155" fill="none" stroke-width="3"/>
                            <path d="M80 90 Q100 60 120 90" fill="#f97316" opacity="0.6"/> <!-- Magma -->
                            <text x="75" y="100" font-size="8" font-weight="bold" fill="#f97316">Rising Magma</text>
                            
                            <!-- Arrows (Top Layer) -->
                            <path d="M70 30 L50 30" stroke="#166534" stroke-width="3" marker-end="url(#arrow-green)" class="arrow-left"/>
                            <path d="M130 30 L150 30" stroke="#166534" stroke-width="3" marker-end="url(#arrow-green)" class="arrow-right"/>
                            <text x="85" y="25" font-size="8" fill="#166534" font-weight="bold">Movement</text>
                        </svg>
                        <ul class="text-xs list-disc pl-4 space-y-1">
                            <li><strong>Movement:</strong> Plates move <strong>AWAY</strong> from each other.</li>
                            <li><strong>Result:</strong> Magma rises to form new crust/shield volcanoes.</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- VOLCANO DIAGRAM SECTION -->
        <section id="sec-volcano" class="hidden-section space-y-8">
            <div class="bg-white rounded-xl shadow-sm border p-6">
                <div class="flex flex-col md:flex-row justify-between items-center border-b pb-3 mb-6 gap-3">
                    <h2 class="text-xl md:text-2xl font-bold text-blue-900">3. Interactive Stratovolcano Diagram</h2>
                    <div class="flex gap-2 w-full md:w-auto">
                        <button onclick="toggleLabels()" class="flex-1 md:flex-none bg-slate-200 text-slate-800 text-xs px-3 py-2 rounded hover:bg-slate-300 font-bold active:scale-95 transition-transform">Toggle Labels</button>
                    </div>
                </div>
                
                <div class="flex flex-col lg:flex-row gap-8 items-start">
                    <!-- SVG CONTAINER -->
                    <div class="w-full lg:w-3/4 bg-slate-100 rounded-xl p-2 border border-slate-200 relative overflow-hidden shadow-inner">
                        <p class="absolute top-2 left-2 text-[10px] text-slate-400 font-mono pointer-events-none z-10">TAP PARTS FOR DATA</p>
                        
                        <svg viewBox="0 0 500 400" class="w-full h-auto">
                            <defs>
                                <linearGradient id="magmaGrad" x1="0%" y1="0%" x2="0%" y2="100%">
                                    <stop offset="0%" style="stop-color:#fca5a5;stop-opacity:1" />
                                    <stop offset="50%" style="stop-color:#ef4444;stop-opacity:1" />
                                    <stop offset="100%" style="stop-color:#991b1b;stop-opacity:1" />
                                </linearGradient>
                                <linearGradient id="ashGrad" x1="0%" y1="100%" x2="0%" y2="0%">
                                    <stop offset="0%" style="stop-color:#6b7280;stop-opacity:0.8" />
                                    <stop offset="100%" style="stop-color:#1f2937;stop-opacity:0" />
                                </linearGradient>
                                <pattern id="rockPattern" patternUnits="userSpaceOnUse" width="10" height="10">
                                    <path d="M0,10 l10,-10 M-2,2 l4,-4 M8,12 l4,-4" stroke="#94a3b8" stroke-width="1"/>
                                </pattern>
                            </defs>

                            <rect width="500" height="400" fill="#f1f5f9" />
                            <rect x="0" y="340" width="500" height="60" fill="#57534e" />
                            
                            <g class="interactive-part" onclick="showDetail('magma')">
                                <ellipse cx="250" cy="370" rx="70" ry="35" fill="url(#magmaGrad)" />
                                <text x="250" y="375" font-size="10" font-weight="bold" fill="white" text-anchor="middle" class="volcano-label pointer-events-none">Magma Chamber</text>
                            </g>

                            <path d="M235 340 L235 80 L265 80 L265 340 Z" fill="#ef4444" class="interactive-part" onclick="showDetail('vent')" />

                            <path d="M80 340 L250 80 L420 340 Z" fill="#64748b" />
                            <path d="M80 340 L250 80 L420 340 Z" fill="url(#rockPattern)" opacity="0.3" pointer-events="none"/>
                            
                            <!-- Alternating Layers -->
                            <path d="M120 280 L250 130 L380 280" stroke="#334155" stroke-width="6" stroke-dasharray="15,5" fill="none" opacity="0.5"/>
                            <path d="M150 230 L250 160 L350 230" stroke="#334155" stroke-width="6" stroke-dasharray="15,5" fill="none" opacity="0.5"/>

                            <!-- Secondary Vent -->
                            <g class="interactive-part" onclick="showDetail('secondary')">
                                <path d="M330 240 L350 200 L370 240 Z" fill="#475569" />
                                <path d="M265 240 L350 240 L350 200" fill="none" stroke="#ef4444" stroke-width="3" />
                            </g>

                            <!-- Gas Vents -->
                            <g class="interactive-part" onclick="showDetail('gas')">
                                <circle cx="180" cy="190" r="3" fill="#facc15" />
                                <text x="140" y="180" font-size="9" font-weight="bold" fill="black" class="volcano-label">Gas Vents</text>
                                <line x1="175" y1="180" x2="185" y2="185" stroke="black" stroke-width="1" class="volcano-label"/>
                            </g>

                            <!-- Pyroclastic Flow -->
                            <g class="interactive-part" onclick="showDetail('pyro')">
                                <path d="M235 90 Q160 110 90 340" stroke="#374151" stroke-width="18" fill="none" opacity="0.9" stroke-linecap="round" />
                                <text x="30" y="240" font-size="10" font-weight="bold" fill="#111827" class="volcano-label">Pyroclastic Flow</text>
                            </g>

                            <!-- Lava Flow -->
                            <g class="interactive-part" onclick="showDetail('lava')">
                                <path d="M350 200 Q400 220 440 340" stroke="#ea580c" stroke-width="10" fill="none" stroke-linecap="round" />
                                <text x="445" y="300" font-size="10" font-weight="bold" fill="#c2410c" class="volcano-label">Viscous Lava Flow</text>
                            </g>

                            <!-- Lahar -->
                            <g class="interactive-part" onclick="showDetail('lahar')">
                                <path d="M400 340 Q430 350 480 380" stroke="#5d4037" stroke-width="12" fill="none" stroke-linecap="round"/>
                                <text x="430" y="360" font-size="10" font-weight="bold" fill="#422006" class="volcano-label">Lahar (Mudflow)</text>
                            </g>

                            <!-- Ash Cloud -->
                            <g class="interactive-part" onclick="showDetail('ash')">
                                <path d="M200 70 Q150 10 250 0 Q350 10 300 70 Z" fill="url(#ashGrad)" />
                                <text x="320" y="40" font-size="10" font-weight="bold" class="volcano-label">Ash Cloud</text>
                            </g>
                            
                            <!-- Landslide -->
                            <g class="interactive-part" onclick="showDetail('landslide')">
                                <path d="M100 340 L140 310 L120 340 Z" fill="#78350f" opacity="0.8"/>
                                <text x="80" y="320" font-size="9" font-weight="bold" class="volcano-label">Landslide</text>
                            </g>

                            <!-- Cracks -->
                            <g class="interactive-part" onclick="showDetail('cracks')">
                                <path d="M60 350 L70 370 M420 350 L430 380" stroke="#1f2937" stroke-width="1.5"/>
                                <text x="30" y="370" font-size="9" font-weight="bold" class="volcano-label">Fissures</text>
                            </g>
                        </svg>
                    </div>
                    
                    <!-- DETAIL PANEL (STACKED ON MOBILE) -->
                    <div class="w-full lg:w-1/4">
                        <div id="info-panel" class="bg-white border border-blue-200 p-4 rounded-lg shadow-lg detail-box">
                            <h4 id="info-title" class="font-bold text-blue-900 mb-2 text-lg">Select a Feature</h4>
                            <p id="info-desc" class="text-sm text-slate-600">Click any part of the volcano diagram to see its definition and hazard rating.</p>
                            <div id="info-hazard" class="mt-4 hidden">
                                <span class="text-[10px] font-bold uppercase tracking-wider text-slate-400">Hazard Level</span>
                                <div class="w-full bg-slate-200 h-2 rounded mt-1">
                                    <div id="hazard-bar" class="bg-red-500 h-full rounded" style="width: 0%"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ACTIVE LEARNING DATA SECTION -->
        <section id="sec-data" class="hidden-section space-y-8">
            <div class="bg-white rounded-xl shadow-sm border p-6">
                <h2 class="text-xl md:text-2xl font-bold border-b pb-3 mb-6">4. Active Data Laboratory (Fig 1.2)</h2>
                
                <div id="data-instructions" class="bg-blue-50 border border-blue-200 p-4 rounded-lg mb-6 flex items-start gap-4">
                    <span class="bg-blue-600 text-white font-bold px-3 py-1 rounded text-sm">STEP 1</span>
                    <div>
                        <h4 class="font-bold text-blue-900">Visual Analysis</h4>
                        <p class="text-sm text-blue-800" id="data-prompt">Study the graph below. Tap the year with the <strong>HIGHEST</strong> frequency (The Peak).</p>
                    </div>
                </div>

                <!-- INTERACTIVE CHART (FULL WIDTH) -->
                <div class="bg-slate-50 p-6 rounded-xl border flex flex-col justify-center mb-8 overflow-x-auto">
                    <p class="text-[10px] uppercase font-bold text-slate-400 mb-4 text-center">Interactive: Tap the bars</p>
                    <svg viewBox="0 0 500 200" class="w-full h-64 min-w-[300px]">
                        <!-- Y-Axis -->
                        <line x1="40" y1="20" x2="40" y2="170" stroke="#94a3b8" stroke-width="1"/>
                        <text x="5" y="25" font-size="8" fill="#64748b">3,000</text>
                        <line x1="40" y1="95" x2="480" y2="95" stroke="#e2e8f0" stroke-width="1"/>
                        <text x="5" y="100" font-size="8" fill="#64748b">1,500</text>
                        <line x1="40" y1="170" x2="480" y2="170" stroke="#1e293b" stroke-width="1"/>

                        <!-- Interactive Bars with Larger Touch Targets via Group -->
                        <g onclick="checkBarClick(2000, 1361)" class="bar-interactive">
                            <rect x="50" y="88.4" width="20" height="81.6" fill="#3b82f6"/>
                            <text x="50" y="185" font-size="8">2000</text>
                        </g>
                        <g onclick="checkBarClick(2003, 1358)" class="bar-interactive">
                            <rect x="90" y="88.5" width="20" height="81.5" fill="#3b82f6"/>
                            <text x="90" y="185" font-size="8">2003</text>
                        </g>
                        <g onclick="checkBarClick(2007, 2270)" class="bar-interactive">
                            <rect x="130" y="33.8" width="20" height="136.2" fill="#ef4444"/>
                            <text x="130" y="185" font-size="8">2007</text>
                        </g>
                        <g onclick="checkBarClick(2009, 1948)" class="bar-interactive">
                            <rect x="170" y="53.2" width="20" height="116.8" fill="#f59e0b"/>
                            <text x="170" y="185" font-size="8">2009</text>
                        </g>
                        <g onclick="checkBarClick(2010, 2383)" class="bar-interactive">
                            <rect x="210" y="27" width="20" height="143" fill="#ef4444"/>
                            <text x="210" y="185" font-size="8">2010</text>
                        </g>
                        <g onclick="checkBarClick(2011, 2481)" class="bar-interactive">
                            <rect x="250" y="21.2" width="20" height="148.8" fill="#dc2626"/>
                            <text x="250" y="185" font-size="8">2011</text>
                        </g>
                        <g onclick="checkBarClick(2015, 1433)" class="bar-interactive">
                            <rect x="290" y="84" width="20" height="86" fill="#3b82f6"/>
                            <text x="290" y="185" font-size="8">2015</text>
                        </g>
                        <g onclick="checkBarClick(2018, 1808)" class="bar-interactive">
                            <rect x="330" y="61.5" width="20" height="108.5" fill="#3b82f6"/>
                            <text x="330" y="185" font-size="8">2018</text>
                        </g>
                        <g onclick="checkBarClick(2021, 2206)" class="bar-interactive">
                            <rect x="370" y="37.6" width="20" height="132.4" fill="#f59e0b"/>
                            <text x="370" y="185" font-size="8">2021</text>
                        </g>
                        <g onclick="checkBarClick(2023, 1523)" class="bar-interactive">
                            <rect x="410" y="78.6" width="20" height="91.4" fill="#3b82f6"/>
                            <text x="410" y="185" font-size="8">2023</text>
                        </g>
                    </svg>
                </div>

                <!-- STEPS 2 & 3 -->
                <div class="grid md:grid-cols-2 gap-6 mb-8">
                    <div id="probe-box" class="hidden bg-white p-6 rounded-lg border border-slate-200 shadow-sm">
                        <h5 class="font-bold text-sm mb-4 text-blue-900 border-b pb-2">STEP 2: Probing Questions</h5>
                        <p class="text-xs text-slate-600 mb-4">Tap to answer.</p>
                        
                        <div class="space-y-4">
                            <div>
                                <p class="text-xs font-bold mb-2">1. Does the line go straight up?</p>
                                <div class="flex gap-2">
                                    <button onclick="checkProbe(this, false, 'Correct! It goes up AND down.')" class="probe-btn">No, it fluctuates</button>
                                    <button onclick="checkProbe(this, true, 'Incorrect. Look at 2015 - it drops.')" class="probe-btn">Yes, steady increase</button>
                                </div>
                            </div>
                            <div>
                                <p class="text-xs font-bold mb-2">2. Compare 2000 (start) and 2023 (end).</p>
                                <div class="flex gap-2">
                                    <button onclick="checkProbe(this, true, 'Incorrect. 1361 vs 1523 is very close.')" class="probe-btn">Huge increase</button>
                                    <button onclick="checkProbe(this, false, 'Correct! They are relatively similar.')" class="probe-btn">Similar baseline</button>
                                </div>
                            </div>
                        </div>
                        <div id="probe-feedback" class="text-xs mt-3 font-bold hidden"></div>
                    </div>

                    <div id="socio-box" class="hidden bg-amber-50 p-6 rounded-lg border border-amber-200 shadow-sm">
                        <div class="flex justify-between items-start">
                            <div>
                                <h5 class="font-bold text-sm mb-2 text-amber-900 flex items-center gap-2">STEP 3: Examiner's Bonus Tip</h5>
                                <p class="text-xs text-amber-800 mb-4">Why do LICs suffer higher casualties?</p>
                            </div>
                        </div>
                        <div id="tip-content" class="hidden space-y-4">
                            <div class="bg-white p-4 rounded border border-amber-100 text-xs leading-relaxed text-slate-700">
                                <p class="font-bold text-amber-700 mb-2">Model Answer Structure:</p>
                                <p class="mb-2">"HICs (High Income Countries) invest in <strong>mitigation</strong> (aseismic design, evacuation drills)."</p>
                                <p>"LICs often lack funds, leading to <strong>building collapse</strong>, the primary cause of death."</p>
                            </div>
                            <button onclick="finishTip()" class="w-full bg-amber-600 text-white text-xs py-3 rounded font-bold active:scale-95 transition-transform">Unlock Final Task</button>
                        </div>
                        <button id="reveal-tip-btn" onclick="revealTip()" class="w-full bg-white border border-amber-300 text-amber-700 text-xs py-3 rounded font-bold hover:bg-amber-100 mt-4 active:scale-95 transition-transform">Reveal Model Answer</button>
                    </div>
                </div>

                <!-- Step 4 -->
                <div id="sentence-box" class="hidden bg-slate-100 p-6 rounded-lg border border-slate-200 max-w-2xl mx-auto">
                    <h5 class="font-bold text-sm mb-4 text-blue-900 text-center">STEP 4: The Final Answer</h5>
                    <div class="mb-6 bg-white p-4 rounded border border-slate-300 text-sm leading-8 text-center shadow-sm">
                        The frequency <span id="slot-1" class="sentence-slot">???</span> over the period. It reached a <span id="slot-2" class="sentence-slot">???</span> of 2,481 in <span id="slot-3" class="sentence-slot">???</span>.
                    </div>
                    <div class="flex flex-wrap gap-2 justify-center">
                        <span class="word-chip" onclick="fillSlot('fluctuates')">fluctuates</span>
                        <span class="word-chip" onclick="fillSlot('increases')">increases</span>
                        <span class="word-chip" onclick="fillSlot('steady')">steady</span>
                        <span class="word-chip" onclick="fillSlot('peak')">peak</span>
                        <span class="word-chip" onclick="fillSlot('low')">low</span>
                        <span class="word-chip" onclick="fillSlot('2011')">2011</span>
                        <span class="word-chip" onclick="fillSlot('2023')">2023</span>
                    </div>
                    <button onclick="checkSentence()" class="mt-6 w-full bg-blue-600 text-white text-xs py-3 rounded font-bold hover:bg-blue-700 active:scale-95 transition-transform">Verify Description</button>
                    <p id="sentence-feedback" class="text-xs mt-3 font-bold text-center"></p>
                </div>
            </div>
        </section>

        <!-- IMPACT: TONGA CASE STUDY -->
        <section id="sec-impact" class="hidden-section space-y-8">
            <div class="bg-white rounded-xl shadow-sm border p-6">
                <div class="border-b pb-4 mb-6">
                    <h2 class="text-xl md:text-2xl font-bold text-slate-900">5. Case Study: Hunga Tonga (2022)</h2>
                    <p class="text-sm text-slate-500 mt-1">Named Example for Question: "Explain the effects of a volcanic eruption."</p>
                </div>
                
                <div class="grid md:grid-cols-2 gap-6 mb-8">
                    <div class="bg-blue-50 border border-blue-200 rounded-lg p-5">
                        <h4 class="font-bold text-blue-900 mb-3 text-sm uppercase">Event Profile</h4>
                        <ul class="text-sm space-y-3">
                            <li class="flex justify-between"><span>Date:</span> <strong>15 Jan 2022</strong></li>
                            <li class="flex justify-between"><span>Location:</span> <strong>Tonga</strong></li>
                            <li class="flex justify-between"><span>Type:</span> <strong>Submarine Volcano</strong></li>
                        </ul>
                    </div>
                    <div class="bg-slate-100 border border-slate-200 rounded-lg p-5 flex flex-col justify-center text-center">
                        <p class="text-xs text-slate-500 uppercase font-bold mb-2">Examiner's Note</p>
                        <p class="text-sm italic text-slate-700">"Unique underwater eruption causing massive tsunami waves."</p>
                    </div>
                </div>

                <!-- IMPACT SORTER GAME -->
                <div class="bg-slate-50 p-6 rounded-xl border border-slate-200">
                    <h4 class="font-bold text-slate-800 mb-2">Active Learning: Classify the Impacts</h4>
                    <div class="grid md:grid-cols-3 gap-4">
                        <div class="bg-white p-4 rounded border border-slate-200 impact-card">
                            <h5 class="font-bold text-red-600 mb-3 text-sm border-b pb-1">1. Volcanic (Primary)</h5>
                            <div class="space-y-2 text-xs">
                                <p>Ash plume 58km high.</p>
                                <p>15m high Tsunami waves.</p>
                            </div>
                        </div>
                        <div class="bg-white p-4 rounded border border-slate-200 impact-card">
                            <h5 class="font-bold text-blue-600 mb-3 text-sm border-b pb-1">2. Social & Economic</h5>
                            <div class="space-y-2 text-xs">
                                <p>Undersea Cable Cut (5 weeks isolation).</p>
                                <p>Tourism Resorts destroyed.</p>
                            </div>
                        </div>
                        <div class="bg-white p-4 rounded border border-slate-200 impact-card">
                            <h5 class="font-bold text-green-600 mb-3 text-sm border-b pb-1">3. Environmental</h5>
                            <div class="space-y-2 text-xs">
                                <p>Coral Reefs smothered by ash.</p>
                                <p>Acid Rain from SO2 gas.</p>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Model Answer Builder ... -->
                 <div class="mt-8 bg-indigo-50 border border-indigo-200 p-6 rounded-xl">
                    <h4 class="font-bold text-indigo-900 mb-2">Build the Answer</h4>
                    <div class="space-y-3">
                        <button onclick="toggleReveal('tonga-ans')" class="bg-indigo-600 text-white text-xs px-4 py-3 rounded font-bold hover:bg-indigo-700 active:scale-95 transition-transform">Reveal Model Answer Structure</button>
                        <div id="tonga-ans" class="hidden bg-white p-4 rounded border border-indigo-100 text-sm leading-relaxed text-slate-700 shadow-sm">
                            <p class="mb-2"><strong class="text-indigo-600">Name:</strong> Hunga Tonga-Hunga Ha'apai (2022)</p>
                            <p class="mb-2"><strong class="text-indigo-600">Primary:</strong> 58km ash plume, 15m tsunami.</p>
                            <p class="mb-2"><strong class="text-indigo-600">Social/Eco:</strong> Undersea cable cut (isolation), contaminated water.</p>
                            <p><strong class="text-indigo-600">Environmental:</strong> Ash smothered coral reefs.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ASSESSMENT WORKSHOP SECTION -->
        <section id="sec-exam" class="hidden-section space-y-8">
            <div class="bg-slate-900 text-white rounded-xl p-8 shadow-xl">
                <div class="flex items-center gap-4 mb-4">
                    <span class="p-2 bg-blue-500 rounded-lg">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path></svg>
                    </span>
                    <h2 class="text-2xl md:text-3xl font-bold">Assessment Workshop</h2>
                </div>
                <p class="text-slate-400 text-sm max-w-2xl">Refine your exam technique. Focus on command words: Identify, State, and Explain.</p>
            </div>

            <div class="grid gap-6">
                <!-- Task 1 -->
                <div class="bg-white p-6 rounded-xl border-l-4 border-l-blue-500 shadow-sm">
                    <div class="flex justify-between items-start mb-4">
                        <div class="bg-blue-100 text-blue-700 text-[10px] font-bold px-2 py-0.5 rounded uppercase">Task 1: Basic Recall</div>
                    </div>
                    <p class="text-sm font-semibold text-slate-800 mb-4">Identify the specific type of volcano typically found at a constructive margin and state the type of lava it produces.</p>
                    <div class="flex flex-col gap-3">
                        <button onclick="toggleReveal('ans-w1')" class="w-fit text-blue-600 text-xs font-bold flex items-center gap-1 hover:underline p-2">
                            VIEW ANSWER KEY
                        </button>
                        <div id="ans-w1" class="hidden p-4 bg-slate-50 border rounded text-xs text-slate-700 leading-relaxed">
                            <ul class="list-disc pl-4 space-y-1">
                                <li><strong>Shield Volcano</strong></li>
                                <li><strong>Runny / Fluid / Low Viscosity</strong> lava.</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Task 2 -->
                <div class="bg-white p-6 rounded-xl border-l-4 border-l-red-500 shadow-sm">
                    <div class="flex justify-between items-start mb-4">
                        <div class="bg-red-100 text-red-700 text-[10px] font-bold px-2 py-0.5 rounded uppercase">Task 2: Process Analysis</div>
                    </div>
                    <p class="text-sm font-semibold text-slate-800 mb-4">Explain why explosive stratovolcanoes form specifically on destructive (convergent) plate boundaries.</p>
                    <div class="flex flex-col gap-3">
                        <button onclick="toggleReveal('ans-w2')" class="w-fit text-red-600 text-xs font-bold flex items-center gap-1 hover:underline p-2">
                            CHECK KEYWORD CHECKLIST
                        </button>
                        <div id="ans-w2" class="hidden p-4 bg-slate-50 border rounded text-xs text-slate-700 leading-relaxed">
                            <div class="grid grid-cols-2 gap-4">
                                <p><strong>1. Subduction:</strong> Plate pushed into mantle.</p>
                                <p><strong>2. Melting:</strong> Slab melting causes magma.</p>
                                <p><strong>3. Viscosity:</strong> Thick / Silica-rich magma.</p>
                                <p><strong>4. Pressure:</strong> Trapped gas leads to explosion.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Task 3 -->
                <div class="bg-white p-6 rounded-xl border-l-4 border-l-indigo-500 shadow-sm">
                    <div class="flex justify-between items-start mb-4">
                        <div class="bg-indigo-100 text-indigo-700 text-[10px] font-bold px-2 py-0.5 rounded uppercase">Task 3: Case Study Integration</div>
                    </div>
                    <p class="text-sm font-semibold text-slate-800 mb-4">"The economic impacts of volcanic eruptions are more significant than the social impacts." To what extent do you agree? Use Tonga (2022) in your evaluation.</p>
                    <div class="flex flex-col gap-3">
                        <button onclick="toggleReveal('ans-w3')" class="w-fit text-indigo-600 text-xs font-bold flex items-center gap-1 hover:underline p-2">
                            MODEL STRUCTURE (L3 ANSWER)
                        </button>
                        <div id="ans-w3" class="hidden p-4 bg-slate-50 border rounded text-xs text-slate-700 leading-relaxed italic">
                            "Partial agreement. Economically, loss of tourism and infrastructure repairs are high. Socially, the severing of the communication cable created profound psychological isolation and hampered aid coordination."
                        </div>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <script>
        function switchTab(tabId) {
            document.querySelectorAll('section').forEach(sec => sec.classList.add('hidden-section'));
            document.getElementById(`sec-${tabId}`).classList.remove('hidden-section');
            document.querySelectorAll('nav button').forEach(btn => btn.classList.remove('nav-active'));
            document.getElementById(`tab-${tabId}`).classList.add('nav-active');
            window.scrollTo(0,0);
        }

        function toggleReveal(id) {
            document.getElementById(id).classList.toggle('hidden');
        }
        
        function toggleLabels() {
            document.querySelectorAll('.volcano-label').forEach(el => el.classList.toggle('hidden-label'));
        }

        const details = {
            'magma': { title: 'Magma Chamber', text: 'Reservoir beneath the crust.', hazard: 100 },
            'vent': { title: 'Main Vent', text: 'Central conduit.', hazard: 90 },
            'secondary': { title: 'Secondary Vent', text: 'Parasitic cone.', hazard: 70 },
            'gas': { title: 'Gas Vents', text: 'Releases toxic steam.', hazard: 40 },
            'pyro': { title: 'Pyroclastic Flow', text: 'Fast, hot ash avalanche.', hazard: 100 },
            'lava': { title: 'Lava Flow', text: 'Viscous, cools quickly.', hazard: 60 },
            'lahar': { title: 'Lahar', text: 'Mudflow (concrete-like).', hazard: 95 },
            'ash': { title: 'Ash Cloud', text: 'Fine rock particles.', hazard: 50 },
            'landslide': { title: 'Landslide', text: 'Slope collapse.', hazard: 80 },
            'cracks': { title: 'Cracks', text: 'Bedrock fissures.', hazard: 30 }
        };

        function showDetail(key) {
            const data = details[key];
            document.getElementById('info-title').innerText = data.title;
            document.getElementById('info-desc').innerText = data.text;
            document.getElementById('info-hazard').classList.remove('hidden');
            document.getElementById('hazard-bar').style.width = data.hazard + '%';
        }

        let currentStep = 1;
        let correctProbes = 0;
        let sentenceState = [null, null, null];

        function checkBarClick(year, value) {
            const prompt = document.getElementById('data-prompt');
            const probeBox = document.getElementById('probe-box');
            
            if (currentStep === 1) {
                if (year === 2011) {
                    prompt.innerHTML = "Correct! 2011 is the Peak. <br><strong>NEXT:</strong> Answer the probing questions below.";
                    currentStep = 2;
                    probeBox.classList.remove('hidden');
                } else {
                    alert("Incorrect. Look for the tallest bar (Highest number).");
                }
            }
        }

        function checkProbe(btn, isWrong, msg) {
            const feedback = document.getElementById('probe-feedback');
            feedback.classList.remove('hidden');
            feedback.innerText = msg;
            
            if(isWrong) {
                btn.classList.add('wrong');
                feedback.className = "text-xs mt-3 font-bold text-red-600";
            } else {
                btn.classList.add('correct');
                feedback.className = "text-xs mt-3 font-bold text-green-600";
                correctProbes++;
                btn.parentElement.querySelectorAll('button').forEach(b => b.disabled = true);
                
                if(correctProbes >= 2) {
                    setTimeout(() => {
                        document.getElementById('socio-box').classList.remove('hidden');
                        document.getElementById('socio-box').scrollIntoView({ behavior: 'smooth' });
                        document.getElementById('data-prompt').innerHTML = "Good analysis. Now apply Socio-Economic logic.";
                    }, 1000);
                }
            }
        }

        function revealTip() {
            document.getElementById('reveal-tip-btn').classList.add('hidden');
            document.getElementById('tip-content').classList.remove('hidden');
        }

        function finishTip() {
            document.getElementById('sentence-box').classList.remove('hidden');
            document.getElementById('sentence-box').scrollIntoView({ behavior: 'smooth' });
            document.getElementById('data-prompt').innerHTML = "<strong>FINAL TASK:</strong> Construct the description sentence below.";
        }

        function fillSlot(word) {
            if (sentenceState[0] === null) { sentenceState[0] = word; document.getElementById('slot-1').innerText = word; }
            else if (sentenceState[1] === null) { sentenceState[1] = word; document.getElementById('slot-2').innerText = word; }
            else if (sentenceState[2] === null) { sentenceState[2] = word; document.getElementById('slot-3').innerText = word; }
        }

        function checkSentence() {
            const s = sentenceState;
            const fb = document.getElementById('sentence-feedback');
            
            if (s[0] === 'fluctuates' && s[1] === 'peak' && s[2] === '2011') {
                fb.className = "text-xs mt-2 font-bold text-green-600";
                fb.innerText = "PERFECT! You have constructed a full-mark description.";
            } else {
                fb.className = "text-xs mt-2 font-bold text-red-600";
                fb.innerText = "Incorrect sequence. Hint: The trend moves up and down (fluctuates), and 2011 was the highest point.";
                sentenceState = [null, null, null];
                document.getElementById('slot-1').innerText = "???";
                document.getElementById('slot-2').innerText = "???";
                document.getElementById('slot-3').innerText = "???";
            }
        }
    </script>
</body>
</html>